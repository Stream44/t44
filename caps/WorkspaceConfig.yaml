
extends:
 - "./WorkspaceShell.yaml"

"#t44/structs/WorkspaceCliConfig.v0":
  javascript:
    api:
      workspaceDir: resolve('${__dirname}/..')
  cli:
    commands:
      activate:
        capsule: "t44/caps/WorkspaceShell.v0"
        description: "Generate environment variables for sourcing into shells."
      deploy:
        capsule: "t44/caps/ProjectDeployment.v0"
        description: "Deploy a project to a provider."
        arguments:
          projectSelector:
            optional: true
            description: "Name of a top-level project directory in the workspace. If not specified, deploys all projects."
        options:
          deprovision:
            description: "Delete the project from the provider instead of deploying it"
      push:
        capsule: "t44/caps/ProjectPublishing.v0"
        description: "Publish local committed code to a remote service."
        arguments:
          projectSelector:
            optional: true
            description: "Name of a top-level project directory in the workspace. If not specified, pushes all repositories."
        options:
          rc:
            description: "Release candidate mode"
          release:
            description: "Remove release candidate suffix and publish release version"
          dangerously-reset-main:
            description: "Reset the git repository and force push to remote"
      dev:
        capsule: "t44/caps/ProjectDevelopment.v0"
        description: "Run a project or package dev server."
        arguments:
          projectSelector:
            optional: true
            description: "Name of a project or package to run the dev script for."
      init:
        capsule: "t44/caps/WorkspaceInit.v0"
        description: "Initialize a new Terminal 44 workspace."
      info:
        capsule: "t44/caps/WorkspaceInfo.v0"
        description: "Display information about the workspace."
        options:
          full:
            description: "Show full details instead of compact view"
